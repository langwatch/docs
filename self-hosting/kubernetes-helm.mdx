---
title: Kubernetes (Helm Chart)
description: Install LangWatch using a Kubernetes Helm chart for production-grade deployments supporting LLM and agent testing workflows.
keywords: self-hosting, helm, kubernetes, deployment, langwatch
---

This document walks you through deploying LangWatch on Kubernetes using our Helm chart. You will add our Helm repo, choose a values profile, and deploy.

<Note>
  While the open-source version is available for local use and experimentation,
  for commercial use please reach out for a [demo call with our
  team](https://get.langwatch.ai/request-a-demo).
</Note>

## Prerequisites

- A Kubernetes cluster (local or managed), kubectl, and Helm 3.12+
- StorageClass available if you enable chart-managed PostgreSQL, Redis, or OpenSearch

<Warning>
Chart-managed OpenSearch/PostgreSQL options are intended for testing/evaluation. For production, use managed/external providers for these services.
</Warning>

## Add Helm repo

```bash
helm repo add langwatch https://langwatch.github.io/langwatch/
helm repo update
```

## Choose a values profile

Pick the profile that matches your environment. You can copy these into files like `values.prod.yaml`, `values.dev.yaml`, `values.half-managed.yaml`, or `values.minimal.yaml`.

### Minimal (quickstart dev)

- Smallest set of overrides for a local test
- Autogen enabled, chart-managed dependencies

```yaml
# values.minimal.yaml
# Minimal development values for LangWatch Helm chart
# Only essential overrides for development environment

autogen:
  enabled: true

app:
  resources:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi

langwatch_nlp:
  resources:
    requests:
      cpu: 500m
      memory: 1Gi
    limits:
      cpu: 1500m
      memory: 2Gi

langevals:
  resources:
    requests:
      cpu: 500m
      memory: 1.5Gi
    limits:
      cpu: 2000m
      memory: 3Gi

postgresql:
  chartManaged: true
  image:
    registry: docker.io
    repository: bitnamilegacy/postgresql
    tag: "16"
  auth:
    password: "rtfyg6j8iu"
  volumePermissions:
    enabled: false

redis:
  chartManaged: true

opensearch:
  chartManaged: true
  singleNode: true
  clusterName: "langwatch-test-opensearch"
```

### Production (external/managed dependencies, secrets via Secret manager)

- No autogen
- External PostgreSQL, Redis, OpenSearch
- Secrets referenced via `secretKeyRef`
- Ingress enabled

```yaml
# values.prod.yaml
global:
  env: production

autogen:
  enabled: false

app:
  http:
    # Public URL for users (your HTTPS domain)
    publicUrl: https://langwatch.example.com
    # Internal base URL (usually same host via Ingress)
    baseHost: https://langwatch.example.com
  credentialsEncryptionKey:
    secretKeyRef:
      name: langwatch-secrets
      key: credentialsEncryptionKey
  cronApiKey:
    secretKeyRef:
      name: langwatch-secrets
      key: cronApiKey
  nextAuth:
    secret:
      secretKeyRef:
        name: langwatch-secrets
        key: nextAuthSecret
  telemetry:
    metrics:
      enabled: true
      apiKey:
        secretKeyRef:
          name: langwatch-secrets
          key: metricsApiKey
    sentry:
      enabled: false

ingress:
  enabled: true
  className: nginx
  hosts:
    - host: langwatch.example.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - hosts:
        - langwatch.example.com
      secretName: langwatch-tls

postgresql:
  chartManaged: false
  external:
    connectionString:
      secretKeyRef:
        name: pg-conn
        key: url

redis:
  chartManaged: false
  external:
    connectionString:
      secretKeyRef:
        name: redis-conn
        key: url

opensearch:
  chartManaged: false
  external:
    engine: opensearch
    nodeUrl:
      secretKeyRef:
        name: opensearch-conn
        key: nodeUrl
    apiKey:
      secretKeyRef:
        name: opensearch-conn
        key: apiKey

prometheus:
  chartManaged: false
```

<Tip>
Create Kubernetes Secrets (`langwatch-secrets`, `pg-conn`, `redis-conn`, `opensearch-conn`) via your secret manager or IaC. Avoid inlining production secrets.
</Tip>

### Local development (chart-managed, autogen, explicit Postgres password)

- Autogen enabled to generate app secrets
- Chart-managed PostgreSQL/Redis/OpenSearch/Prometheus
- Explicit PostgreSQL password for convenience
- No Ingress; port-forward to access
- Includes resource requests/limits for app, NLP, and Langevals

```yaml
# values.dev.yaml
global:
  env: development

autogen:
  enabled: true

app:
  http:
    publicUrl: http://localhost:5560
    baseHost: http://localhost:5560
  features:
    skipEnvValidation: true
  telemetry:
    metrics:
      enabled: false
    sentry:
      enabled: false
  resources:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi

langwatch_nlp:
  resources:
    requests:
      cpu: 500m
      memory: 1Gi
    limits:
      cpu: 1500m
      memory: 2Gi

langevals:
  resources:
    requests:
      cpu: 500m
      memory: 1.5Gi
    limits:
      cpu: 2000m
      memory: 3Gi

postgresql:
  chartManaged: true
  image:
    registry: docker.io
    repository: bitnamilegacy/postgresql
    tag: "16"
  auth:
    username: postgres
    password: dev-postgres-password
    database: langwatch
  volumePermissions:
    enabled: false
  primary:
    persistence:
      enabled: false

redis:
  chartManaged: true
  auth:
    password: dev-redis-password
  master:
    persistence:
      enabled: false

opensearch:
  chartManaged: true
  replicas: 1
  singleNode: true
  persistence:
    enabled: false

prometheus:
  chartManaged: true
```

### Half-managed (external PostgreSQL; chart-managed Redis/OpenSearch/Prometheus)

- No autogen
- External PostgreSQL via connection string
- Chart-managed Redis/OpenSearch/Prometheus

```yaml
# values.half-managed.yaml
global:
  env: production

autogen:
  enabled: false

app:
  http:
    publicUrl: https://langwatch.example.com
    baseHost: https://langwatch.example.com
  credentialsEncryptionKey:
    secretKeyRef:
      name: langwatch-secrets
      key: credentialsEncryptionKey
  cronApiKey:
    secretKeyRef:
      name: langwatch-secrets
      key: cronApiKey
  nextAuth:
    secret:
      secretKeyRef:
        name: langwatch-secrets
        key: nextAuthSecret
  telemetry:
    metrics:
      enabled: true
      apiKey:
        secretKeyRef:
          name: langwatch-secrets
          key: metricsApiKey

ingress:
  enabled: true
  className: nginx
  hosts:
    - host: langwatch.example.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - hosts:
        - langwatch.example.com
      secretName: langwatch-tls

postgresql:
  chartManaged: false
  external:
    connectionString:
      secretKeyRef:
        name: pg-conn
        key: url

redis:
  chartManaged: true
  auth:
    password: change-me # or use an existing Secret
  master:
    persistence:
      enabled: true
      size: 10Gi

opensearch:
  chartManaged: true
  replicas: 1
  persistence:
    enabled: true
    size: 20Gi

prometheus:
  chartManaged: true
```

## Install

```bash
# (Optional) dedicated namespace
kubectl create namespace langwatch

# Install using your chosen values file
helm install langwatch langwatch/langwatch-helm \
  -n langwatch \
  -f values.prod.yaml # or values.dev.yaml, values.half-managed.yaml, values.minimal.yaml
```

<Check>
All pods should become Ready. Use `kubectl get pods -n langwatch`.
</Check>

## Access the UI (local dev)

```bash
kubectl port-forward svc/langwatch-app -n langwatch 5560:5560
```

Open `http://localhost:5560`.

## Upgrade

```bash
helm repo update
helm upgrade langwatch langwatch/langwatch-helm \
  -n langwatch \
  -f values.prod.yaml # or your chosen values file
```

### Migration from Pre-1.0.0 Helm Charts

<Warning>
If you're upgrading from a LangWatch Helm chart version before 1.0.0, you may need to preserve your existing PostgreSQL data.
</Warning>

Preserve existing data by setting `postgresql.primary.persistence.existingClaim` in your values file:

```yaml
postgresql:
  primary:
    persistence:
      existingClaim: "data-langwatch-postgres-0"
      size: 20Gi
```

This will prevent data loss during the upgrade process.

## Uninstall

```bash
helm uninstall langwatch -n langwatch
kubectl delete namespace langwatch
```

## FAQ

<AccordionGroup>
<Accordion title="Istio/service mesh: wait-for-opensearch job fails">
If your cluster uses Istio sidecar injection, the pre-install job `wait-for-opensearch` can fail because the job may start before the Istio proxy is ready and cannot reach OpenSearch.

<Warning>
Workarounds:
</Warning>

- Disable sidecar injection for the job/pod:

```yaml
metadata:
  annotations:
    sidecar.istio.io/inject: "false"
```

- Or allow egress to OpenSearch by excluding port 9200 from Envoy interception:

```yaml
metadata:
  annotations:
    traffic.sidecar.istio.io/excludeOutboundPorts: "9200"
```

Alternatively, configure an Istio `ServiceEntry`/egress policy for your OpenSearch endpoint.
</Accordion>

<Accordion title="OpenSearch: duplicate env var error (cluster.initial_master_nodes)">
If you see an error like:

```
Error: INSTALLATION FAILED: failed to create typed patch object ... duplicate entries for key [name="cluster.initial_master_nodes"]
```

Add `singleNode: true` to your opensearch configuration:

```yaml
opensearch:
  chartManaged: true
  singleNode: true
```

See [issue #1232](https://github.com/langwatch/langwatch/issues/1232) for details.
</Accordion>

<Accordion title="PostgreSQL: image pull errors (bitnami/postgresql or bitnami/os-shell not found)">
If PostgreSQL pods fail with `ImagePullBackOff` or `ErrImagePull` for images like `bitnami/postgresql:16.x.x-debian-...` or `bitnami/os-shell:...`, the Bitnami images may have been removed from Docker Hub.

Use the legacy Bitnami image and disable the volumePermissions init container:

```yaml
postgresql:
  chartManaged: true
  image:
    registry: docker.io
    repository: bitnamilegacy/postgresql
    tag: "16"
  volumePermissions:
    enabled: false
```

See [issue #1232](https://github.com/langwatch/langwatch/issues/1232) for details.
</Accordion>
</AccordionGroup>
